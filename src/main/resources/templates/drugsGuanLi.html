
<table id="dg" class="easyui-datagrid"
       data-options="toolbar:'#tb',url:'drugsGuanLia',pagination:true,fitColumns:true,nowrap:false,singleSelect:false,fit:true">
    <thead>
    <tr>
        <th data-options="field:'ch',checkbox:true,width:10,align:'center'"></th>
        <th data-options="field:'drugsId',width:100,align:'center'">编码</th>
        <th data-options="field:'drName',width:150">名称</th>
        <th data-options="field:'price',width:100,align:'center'">价格￥</th>
        <th data-options="field:'num',width:100,align:'right',align:'center'">数量</th>
        <th data-options="field:'createDate',width:150,formatter:formatTime,align:'center'">日期</th>
        <th data-options="field:'images',width:100,formatter:showImg,align:'center'">图片</th>
        <th data-options="field:'drInfo',width:500">信息</th>
    </tr>
    </thead>
    <div id="tb">
        Title:<input type="text" id="qtitle" placeholder="请输入..."/>￥：<input type="text" id="qPrice" placeholder="请输入..."/>
        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="drugSearch()">查询</a>
        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-add'" onclick="drugAdd()">新增</a>
        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-cut'" onclick="drugDelete()">删除</a>
        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-edit'">修改</a>
    </div>
</table>
<script>
    function showImg(value, row, index) {
        if(value){
            return "<img style='width:80px;height:60px;' border='1' src='"+value+"'/>";
        }
    }
    function formatTime(v,r,i) {
        return moment(v).format("YYYY-MM-DD hh:mm:ss")
    }
    function drugAdd() {
        // $.messager.alert("提示","添加");
        $(".tree-title:contains('药品添加')").parent().click();
    }
    function drugDelete() {
        $.messager.confirm('确认','您确认想要删除记录吗？',function (r) {
            if(r){
                $.messager.alert("提示","已经删除成功");
            }
        })
    }
    function drugSearch() {
        $("#dg").datagrid('load',{
            //给load方法添加查询条件
            title: $("#qtitle").val(),
            price: $("#qPrice").val()
        });
    }
</script>